<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Horse Web - Carousel Responsive</title>
  <style>
    :root {
      --dark-bg: #1a150f;
      --light-bg: #f9eecd;
      --text-color: #d1b777;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: var(--dark-bg);
      color: var(--text-color);
      overflow-x: hidden;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 18vw;
    }

    .logo img {
      height: 40px;
    }

    .contact-info {
      font-size: 1rem;
    }

    .menu-toggle {
      width: 30px;
      cursor: pointer;
    }

    .menu-toggle span {
      display: block;
      height: 3px;
      background: var(--text-color);
      margin: 5px 0;
    }

    @media(max-width:900px) {
      .contact-info {
        display: none;
      }
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      z-index: 1500;
      display: none;
    }

    .overlay.active {
      display: block;
    }

    .menu-panel {
      position: fixed;
      top: 0;
      right: -520px;
      width: 470px;
      height: 100%;
      background: rgba(26, 21, 15, 0.98);
      padding: 18px;
      transition: right .3s ease;
      z-index: 2000;
    }

    @media (max-width: 1024px) {
      .menu-panel {
        right: -320px;
        /* lưu ý đổi theo width để tránh bị lộ */
        width: 200px;
      }
    }

    /* Màn hình nhỏ hơn 431px */
    @media (max-width: 431px) {
      .menu-panel {
        right: -320px;
        /* lưu ý đổi theo width để tránh bị lộ */
        width: 100px;
      }
    }

    .menu-panel.active {
      right: 0;
    }

    .menu-links {
      list-style: none;
      padding: 0;
      margin-top: 50px;
    }

    .menu-links li {
      padding: 14px 0;
      border-bottom: 1px solid rgba(255, 255, 255, .1);
    }

    .menu-links a {
      color: #fff;
      text-decoration: none;
      font-size: 1.1rem;
      transition: color .2s;
    }

    .menu-links a:hover {
      color: var(--text-color);
    }

    .carousel-container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto 40px;
      height: clamp(500px, 70vh, 720px);
      position: relative;
      perspective: 2000px;
      overflow: visible;
    }

    .carousel {
      width: 100%;
      height: 100%;
      position: relative;
    }

    .slide {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, .25);
      transition: opacity .6s ease, transform .6s ease;
      opacity: 0;
      background: var(--dark-bg);
    }

    .slide img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      background-color: var(--dark-bg);
      display: block;
    }

    .caption {
      position: absolute;
      top: 12px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.5);
      color: #fff;
      padding: 6px 14px;
      border-radius: 6px;
      font-size: 1rem;
      pointer-events: none;
      white-space: nowrap;
    }

    .content-container {
      padding: 22px 5vw;
    }

    .masonry {
      column-count: 3;
      column-gap: 12px;
    }

    .masonry-item {
      background: var(--light-bg);
      margin-bottom: 12px;
      border-radius: 6px;
      overflow: hidden;
      display: inline-block;
      width: 100%;
    }

    .masonry-item img {
      width: 100%;
      display: block;
    }

    @media(max-width:900px) {
      .masonry {
        column-count: 2;
      }
    }

    @media(max-width:600px) {
      .masonry {
        column-count: 1;
      }
    }

    footer {
      padding: 30px 18vw;
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      background: black;
      padding-bottom: 10vw;
    }

    footer img {
      width: 122px;

      height: 40px;
    }

    .slide .view-btn {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, 20px);
      background: rgba(0, 0, 0, 0.6);
      border: 3px solid #d1b777;
      color: #d1b777;
      padding: 12px 22px;
      font-size: 1.1rem;
      font-weight: bold;
      border-radius: 8px;
      opacity: 0;
      transition: all 0.4s ease;
      cursor: pointer;
    }

    .slide:hover .view-btn {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1.05);
    }
  </style>
</head>

<body>
  <header>
    <div class="logo"><img src="./images/logo.png" alt="Horse Logo"></div>
    <div class="menu-toggle" id="menuToggle"><span></span><span></span><span></span></div>
  </header>

  <main>
    <section class="carousel-container" id="carouselContainer">
      <div class="carousel" id="carousel">
        <div class="slide">
          <div class="caption">Banner 1</div>
          <img src="https://picsum.photos/id/1015/1200/1800">
          <button class="view-btn" data-link="./product.html">Xem chi tiết</button>
        </div>
        <div class="slide">
          <div class="caption">Poster 2</div><img src="https://picsum.photos/id/1025/1200/1800"><button class="view-btn"
            data-link="./product.html">Xem chi tiết</button>
        </div>
        <div class="slide">
          <div class="caption">Event 3</div><img src="https://picsum.photos/id/1035/1200/1800"><button class="view-btn"
            data-link="./product.html">Xem chi tiết</button>
        </div>
        <div class="slide">
          <div class="caption">Show 4</div><img src="https://picsum.photos/id/1045/1200/1800"><button class="view-btn"
            data-link="./product.html">Xem chi tiết</button>
        </div>
        <div class="slide">
          <div class="caption">Promo 5</div><img src="https://picsum.photos/id/1055/1200/1800"><button class="view-btn"
            data-link="./product.html">Xem chi tiết</button>
        </div>
      </div>
    </section>

    <section class="content-container">
      <div class="masonry">
        <div class="masonry-item"><img src="https://picsum.photos/id/200/400/300"></div>
        <div class="masonry-item"><img src="https://picsum.photos/id/201/400/500"></div>
        <div class="masonry-item"><img src="https://picsum.photos/id/202/400/450"></div>
        <div class="masonry-item"><img src="https://picsum.photos/id/203/400/320"></div>
        <div class="masonry-item"><img src="https://picsum.photos/id/204/400/380"></div>
        <div class="masonry-item"><img src="https://picsum.photos/id/201/400/500"></div>
        <div class="masonry-item"><img src="https://picsum.photos/id/203/400/320"></div>
        <div class="masonry-item"><img src="https://picsum.photos/id/200/400/300"></div>
        <div class="masonry-item"><img src="https://picsum.photos/id/202/400/450"></div>
        <div class="masonry-item"><img src="https://picsum.photos/id/204/400/380"></div>
        <div class="masonry-item"><img src="https://picsum.photos/id/201/400/500"></div>
        <div class="masonry-item"><img src="https://picsum.photos/id/203/400/320"></div>
      </div>
    </section>
  </main>

  <footer>
    <div>
      <img src="./images/logo.png" alt="logo">
      <div style="margin-top:8px">contact@horsestudio.com<br>+842 8498 894</div>
    </div>
    <div>
      <a style="color:var(--text-color);margin-left:8px" href="#">FB</a>
      <a style="color:var(--text-color);margin-left:8px" href="#">YT</a>
    </div>
  </footer>

  <aside class="menu-panel" id="menuPanel">

    <ul class="menu-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="./about.html">About</a></li>
      <li><a href="#">Contact</a></li>
    </ul>
  </aside>
  <div class="overlay" id="overlay"></div>

  <script>
    // Menu
    const menuToggle = document.getElementById('menuToggle');
    const menuPanel = document.getElementById('menuPanel');
    const overlay = document.getElementById('overlay');
    menuToggle.addEventListener('click', () => { menuPanel.classList.toggle('active'); overlay.classList.toggle('active'); });
    function closeMenu() { menuPanel.classList.remove('active'); overlay.classList.remove('active'); }
    overlay.addEventListener('click', closeMenu);

    // Carousel
    (function () {
      const container = document.getElementById('carouselContainer');
      const slides = Array.from(document.querySelectorAll('.slide'));
      let current = 0, autoId = null;

      function updateCarousel() {
        const total = slides.length;
        const cw = container.clientWidth;
        slides.forEach((slide, i) => {
          let slideW, slideH;
          if (window.innerWidth > 1024) {
            slideW = Math.min(800, cw * 0.75);
            slideH = Math.round(slideW * 0.66);
          } else {
            slideW = Math.min(360, cw * 0.85);
            slideH = Math.round(slideW * 1.2);
          }
          slide.style.width = slideW + "px";
          slide.style.height = slideH + "px";
          const offset = (i - current + total) % total;
          if (offset === 0) { slide.style.transform = `translate(-50%,-50%) scale(1)`; slide.style.zIndex = 5; slide.style.opacity = 1; }
          else if (offset === 1) { slide.style.transform = `translate(calc(-50% + ${slideW * 0.8}px),-50%) scale(0.85)`; slide.style.zIndex = 3; slide.style.opacity = 0.3; }
          else if (offset === total - 1) { slide.style.transform = `translate(calc(-50% - ${slideW * 0.8}px),-50%) scale(0.85)`; slide.style.zIndex = 3; slide.style.opacity = 0.3; }
          else { slide.style.opacity = 0; slide.style.zIndex = 1; }
        });
      }
      function next() { current = (current + 1) % slides.length; updateCarousel(); }
      function prev() { current = (current - 1 + slides.length) % slides.length; updateCarousel(); }
      function startAuto() { stopAuto(); autoId = setInterval(next, 1000); }
      function stopAuto() { if (autoId) clearInterval(autoId); }

      // Swipe cho mobile + desktop
      let startX = 0, isDragging = false;
      const carouselEl = document.getElementById('carousel');

      // Mobile
      carouselEl.addEventListener('touchstart', e => { startX = e.touches[0].clientX; stopAuto(); }, { passive: true });
      carouselEl.addEventListener('touchend', e => {
        const dx = e.changedTouches[0].clientX - startX;
        if (Math.abs(dx) > 40) { dx < 0 ? next() : prev(); }
        startAuto();
      }, { passive: true });

      // Desktop
      carouselEl.addEventListener('mousedown', e => { startX = e.clientX; isDragging = true; stopAuto(); });
      carouselEl.addEventListener('mouseup', e => {
        if (!isDragging) return;
        const dx = e.clientX - startX;
        if (Math.abs(dx) > 40) { dx < 0 ? next() : prev(); }
        isDragging = false;
        startAuto();
      });

      window.addEventListener('resize', () => updateCarousel());
      window.addEventListener('orientationchange', () => setTimeout(updateCarousel, 100));
      updateCarousel(); startAuto();
    })();
    document.querySelectorAll('.view-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const link = btn.getAttribute('data-link');
        if (link) window.location.href = link; // chuyển hướng
      });
    });
  </script>
</body>

</html>